{"globs":["test/**/*.dart","lib/**/*.dart","analysis_options.*"],"description":"audit mode: self-audit, tests, and regression guard (RIPER-5.R) + Auto-Iterate","alwaysApply":false}
Goal: verify behavior + guard against regressions, auto-iterate until green when feasible.
Scope:
- Run+interpret tests (unit/widget/integration) via Dart/Flutter tools/scripts.
- Inspect lints for new violations; confirm style/arch rules.
- Check for obvious performance/security/UX regressions trong pháº¡m vi thay Ä‘á»•i.
RIPER-5 usage: R=list verification targets; I=classify (pass/fail/risk); P=decide fixes vs follow-ups; E=fix minimal; R=final status.
Default-to-Action & iteration:
- Máº·c Ä‘á»‹nh tá»± cháº¡y toÃ n bá»™ tests/lints liÃªn quan, khÃ´ng chá» há»i cho tá»«ng láº§n run.
- Cho phÃ©p Agent tá»± Ä‘á»™ng láº·p láº¡i vÃ²ng: run tests â†’ phÃ¢n tÃ­ch lá»—i â†’ sá»­a tá»‘i thiá»ƒu â†’ rerun, cho Ä‘áº¿n khi toÃ n bá»™ suite liÃªn quan PASS hoáº·c cháº¡m Clarification Threshold.
- Ãp dá»¥ng `Complete Everything` cho chain lá»—i: náº¿u fix A lÃ m lá»™ thÃªm lá»—i B cÃ¹ng flow, tiáº¿p tá»¥c xá»­ lÃ½ B trong cÃ¹ng session audit trÆ°á»›c khi bÃ¡o âœ….
Clarification Threshold:
- Chá»‰ dá»«ng Ä‘á»ƒ há»i khi: (1) hoÃ n thÃ nh 1 Milestone lá»›n trong TodoLedger (vd: â€œtáº¥t cáº£ tests module X passâ€); (2) lá»—i/váº¥n Ä‘á» gá»£i Ã½ nhiá»u hÆ°á»›ng kiáº¿n trÃºc hoáº·c thay Ä‘á»•i lá»›n; (3) rá»§i ro báº£o máº­t/máº¥t dá»¯ liá»‡u nghiÃªm trá»ng hoáº·c tháº¥t báº¡i test gá»£i Ã½ bug loáº¡i nÃ y.
- Khi há»i, cung cáº¥p tÃ³m táº¯t: verification matrix rÃºt gá»n, chuá»—i lá»—i Ä‘Ã£ xá»­ lÃ½, option cÃ²n láº¡i + khuyáº¿n nghá»‹.
TodoLedger:
- Duy trÃ¬ ledger {ğŸš§ verifying, âœ… verified, âš ï¸ failing/risky}.
- Min entries: tests run, lints check, manual sanity-check (UI), chains lá»—i chÃ­nh.
- Má»—i failing test/lint â†’ âš ï¸ entry (kÃ¨m module/test id). Chá»‰ chuyá»ƒn sang âœ… khi chain liÃªn quan Ä‘Ã£ pass sau Ã­t nháº¥t 1 rerun.
Execution rules:
- Æ¯u tiÃªn fixes nhá», targeted; refactor lá»›n chá»‰ ghi nháº­n âš ï¸ follow-up.
- Khi tests fail: log ngáº¯n gá»n: test, error key-line, module nghi ngá», hÃ nh Ä‘á»™ng Ä‘Ã£ thá»­.
- Sau má»—i chá»‰nh sá»­a Ä‘á»ƒ fix, ngay láº­p tá»©c rerun subset tests liÃªn quan trÆ°á»›c khi move on.
MemoryBank:
- Sau má»™t batch audit (vÃ­ dá»¥ sau khi 1 nhÃ³m tests pass), auto cáº­p nháº­t `activeContext.md`+`progress.md` (náº¿u cÃ³): tráº¡ng thÃ¡i test suites, module Ä‘Æ°á»£c verify, failure cÃ²n láº¡i.
- Cáº­p nháº­t draft cho `decisions.md`: cÃ¡c invariants má»›i phÃ¡t hiá»‡n, tests Ä‘Æ°á»£c gáº¯n â€œcritical pathâ€.
- Giá»¯ ná»™i dung nÃ©n: bullet ngáº¯n, trÃ¡nh log chi tiáº¿t.
Interaction pattern:
- Cáº¥u trÃºc outputs: `Verification Matrix`, `Findings`, `Fixes`, `Residual Risks`, `TodoLedger`, `MemoryBank Draft`.
- DÃ¹ng bullets/tables ngáº¯n; chá»‰ trÃ­ch dáº«n vÃ i dÃ²ng log tiÃªu biá»ƒu náº¿u tháº­t sá»± cáº§n.


