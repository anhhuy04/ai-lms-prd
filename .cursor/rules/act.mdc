{"globs":["lib/**/*.dart","test/**/*.dart","analysis_options.*"],"description":"act mode: implementation with Read-Write-Reread discipline (RIPER-5.E) + Default-to-Action","alwaysApply":false}
Goal: implement the agreed plan safely, in small, verifiable slices, defaulting to action.
Core loop (Read-Write-Reread):
- Read: re-open plan+activeContext; locate exact insertion points; re-check constraints/tests.
- Write: smallest viable change; keep diffs tight; align vá»›i patterns+skills hiá»‡n cÃ³.
- Reread: re-scan edits; verify invariants, formatting, naming, edge cases.
Default-to-Action:
- Sau khi Ä‘Ã£ cÃ³ Ä‘á»§ ngá»¯ cáº£nh (research/plan), máº·c Ä‘á»‹nh tá»± thá»±c thi bÆ°á»›c tiáº¿p theo mÃ  khÃ´ng há»i cho cÃ¡c thay Ä‘á»•i nhá»/low-risk.
- Ãp dá»¥ng quy táº¯c `Complete Everything`: náº¿u task A sinh lá»—i B â†’ xá»­ lÃ½ trá»n chuá»—i (A,B,phá»¥ thuá»™c gáº§n) trÆ°á»›c khi report hoÃ n thÃ nh.
- Chá»‰ defer sang @audit/@retro khi chuá»—i task hiá»‡n táº¡i Ä‘Ã£ khÃ©p (hoáº·c bá»‹ cháº·n bá»Ÿi Clarification Threshold).
Clarification Threshold:
- Chá»‰ dá»«ng láº¡i Ä‘á»ƒ há»i khi: (1) hoÃ n thÃ nh 1 Milestone lá»›n trong TodoLedger; (2) yÃªu cáº§u mÆ¡ há»“ hoáº·c cÃ³ nhiá»u hÆ°á»›ng kiáº¿n trÃºc há»£p lÃ½; (3) nghi ngá» rá»§i ro báº£o máº­t/máº¥t dá»¯ liá»‡u Ä‘Ã¡ng ká»ƒ.
- Náº¿u pháº£i há»i, tÃ³m táº¯t: tiáº¿n Ä‘á»™, cÃ¡c option chÃ­nh, rá»§i ro, vÃ  Ä‘á» xuáº¥t khuyáº¿n nghá»‹ máº·c Ä‘á»‹nh.
TodoLedger:
- Keep live ledger {ğŸš§, âœ…, âš ï¸}. Min entries: wiring, logic, tests (if in scope), cleanup.
- ÄÃ¡nh dáº¥u âœ… cho 1 task chain chá»‰ khi táº¥t cáº£ sub-issues trong chuá»—i Ä‘Ã£ xá»­ lÃ½ xong (theo `Complete Everything`).
- Duy trÃ¬ â‰¤5 active items; merge/collapse cÃ¡c viá»‡c nhá» liÃªn quan cÃ¹ng chain.
Safety & quality:
- TuÃ¢n thá»§ rules tá»« `.cursor/skills/**/*.md` (clean layers, Riverpod, routing, v.v.).
- Æ¯u tiÃªn patterns sáºµn cÃ³; náº¿u lá»‡ch, nÃªu lÃ½ do 1 dÃ²ng.
- TrÃ¡nh refactor rá»™ng náº¿u khÃ´ng Ä‘Æ°á»£c yÃªu cáº§u; náº¿u phÃ¡t hiá»‡n nhu cáº§u refactor há»‡ thá»‘ng, log âš ï¸ follow-up thay vÃ¬ tá»± Ã½ má»Ÿ rá»™ng scope.
MemoryBank:
- Sau má»—i batch code xong (trÆ°á»›c khi há»i user), tá»± cáº­p nháº­t tráº¡ng thÃ¡i vÃ o `activeContext.md`+`progress.md` (náº¿u tá»“n táº¡i) dÆ°á»›i dáº¡ng tÃ³m táº¯t: files touched, feature/slice, tráº¡ng thÃ¡i tests chÃ­nh.
- Äá»“ng thá»i Ä‘á» xuáº¥t snippet ngáº¯n cho `decisions.md` náº¿u cÃ³ quy Æ°á»›c má»›i/local convention.
- Drafts pháº£i ngáº¯n: list file+1 dÃ²ng purpose; trÃ¡nh láº·p láº¡i code.
Interaction pattern:
- Cáº¥u trÃºc tráº£ lá»i: `Target`, `Micro-steps`, `Changes (hi-level)`, `TodoLedger`, `MemoryBank Draft`.
- Æ¯u tiÃªn code references; trÃ¡nh dump full file trá»« khi thá»±c sá»± cáº§n.


